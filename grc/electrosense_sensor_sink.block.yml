# auto-generated by grc.converter

id: electrosense_sensor_sink
label: Sensor sink
category: '[Electrosense]'

parameters:
-   id: server
    label: Server IP
    dtype: string
    default: 127.0.0.1
-   id: port
    label: Port
    dtype: int
    default: '5000'
-   id: veclen
    label: Vector length
    dtype: int
    default: '1'
    #hide: ${ 'part' if vlen == 1 else 'none' }
-   id: dtype
    label: Input Type
    dtype: enum
    options: [complex, float, int]
    option_attributes:
        size: ['"complex64"', '"float32"', '"uint16"']
    hide: part
-   id: avrofile
    label: Schema file
    dtype: string
    default: rtl-spec.avsc
-   id: keyfile
    label: Key file
    dtype: string
    default: Sensor-SSL-SK.pem
-   id: certfile
    label: Certificate
    dtype: string
    default: Sensor-SSL-Cert.pem
-   id: senid
    label: Sensor ID
    dtype: int
    default: '123456'
-   id: hopping
    label: Hopping type
    dtype: int
    default: '0'
-   id: window
    label: FFT window
    dtype: int
    default: '0'
-   id: fftsize
    label: FFT size
    dtype: int
    default: '256'
-   id: avgfactor
    label: Averaging factor
    dtype: int
    default: '5'
-   id: freqoverlap
    label: Frequency overlap
    dtype: float
    default: '0.5'
-   id: freqresol
    label: Frequency resolution
    dtype: int
    default: '50'
-   id: freq
    label: Centre frequency
    dtype: int
    default: '1800000'
-   id: gain
    label: Gain
    dtype: int
    default: '-1'

inputs:
-   label: in0
    domain: stream
    dtype: ${ dtype }
    vlen: ${ veclen }

templates:
    imports: import electrosense
    make: "electrosense.sensor_sink(${server}, ${port}, ${veclen},\n             \
        \    ${dtype.size}, ${avrofile}, ${keyfile}, ${certfile}, ${senid}, ${hopping},\
        \ \n                 ${window}, ${fftsize}, ${avgfactor},\n              \
        \   ${freqoverlap}, ${freqresol}, \n                 ${freq}, ${gain})"
    callbacks:
    - set_hopping(${hopping})
    - set_window(${window})
    - set_fftsize(${fftsize})
    - set_avgfactor(${avgfactor})
    - set_freqoverlap(${freqoverlap})
    - set_freqresol(${freqresol})
    - set_freq(${freq})
    - set_gain(${gain})

file_format: 1
